# Verilog 入门

## **硬件描述语言**

+ **模块** 行为建模与结构建模
+ 模拟
+ **综合**，分为**可综合模块**与**测试程序**(testbench)

## 变量声明

### 向量

+ 左右两侧位宽不一致时，会对右侧变量进行扩展或截断，使之与左侧变量位宽相等。

+ 使用向量时，大小端顺序必须与声明时的顺序保持一致。
  + 因为 `input [4:7] b`不仅决定了位宽还决定了方向，例如定义为[4:7] 的 b 信号，四个管脚分别为 4，5，6，7，在使用中只能正向接，不能反向接

### Wire

+ 使用未经声明的变量不会导致错误。变量未经声明即使用时默认为 1 位 wire 型变量。
+ 声明 wire 型向量：`wire [num1:num2] a`（其中 `num1,num2` 为整数常量），则 `num1,num2` 的值可以是负数，且 `num1、num2 `中的较大值可以在前也可以在后。(表示位数的下标分别是什么，小端还是大端)

### Reg

`Reg` 型是寄存器数据类型，具有**存储**功能。它**也分为标量和向量**，类似 `wire` 型

**`reg` 型变量不能使用 `assign` 赋值**

可以用`Reg`变量数组来建模储存器

+ `reg [31:0] mem [0:1023];`，其中**前面的中括号内为位宽，后面的中括号内为存储器数量**、
+ 引用操作访问存储器型数据元素，例如 `mem[2]` 就是访问 `mem` 中的第 3 个元素

### 数字

**<位宽>'<进制>(b/o/h/d)值>**  `10'd100` 表示10位宽的十进制数100

+ 数值中间不能加符号，但可以这样 `-8'd5`

+ 省略位宽时采用默认位宽（与机器有关，一般为 **32 位**）

+ 省略进制时默认为**十进制**

+ 值部分可以用下划线分开提高可读性，如 `16'b1010_1011_1111_1010`。

`x` 为不定值，当某一二进制位的值不能确定时出现，变量的**默认初始值为 `x`**。

`z` 为高阻态，代表**没有连接到有效输入上**。

### Parameter 常量

`parameter 标识符 = 表达式`**在编译时确认值的常量**

+ 可以理解为，在 Logisim 中 MUX 元件的位宽和输入管脚数都是可变的，但是我们具体搭建的模块所使用的实例化的 MUX，其位宽和管脚数都是确定的。

## Assign语句

本质：**用一个信号来驱动另一个信号**，**类似于电路与逻辑门的连接**

## 测试test bench

``` verilog
initial begin
    ...
end
always #1 clk = ~clk;
```

#
